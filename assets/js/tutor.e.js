(()=>{function q(t,e,o){var a=((window._tutorobject||{}).tutor_url||"")+"assets/images/";jQuery(".tutor-toast-parent").length||jQuery("body").append('<div class="tutor-toast-parent"></div>');var n=jQuery('        <div>            <div>                <img src="'+{success:a+"icon-check.svg",error:a+"icon-cross.svg"}[o]+'"/>            </div>            <div>                <div>                    <b>'+t+"</b>                    <span>"+e+'</span>                </div>            </div>            <div>                <i class="tutor-toast-close tutor-icon-line-cross"></i>            </div>        </div>');n.find(".tutor-toast-close").click(function(){n.remove()}),jQuery(".tutor-toast-parent").append(n),setTimeout(function(){n&&n.fadeOut("fast",function(){jQuery(this).remove()})},5e3)}function z(){var t=document.querySelector(".tutor_select_value_holder").value;const e=document.getElementById("tutor_quiz_question_answers"),o=document.getElementById("tutor_quiz_question_answer_form");var a=document.querySelector(".add_question_answers_option"),n=t=>{t.classList.contains("disabled")||t.classList.add("disabled")},i=t=>{t.classList.contains("disabled")&&t.classList.remove("disabled")};("open_ended"===t||"short_answer"===t||("true_false"===t||"fill_in_the_blank"===t)&&(o.hasChildNodes()||e.hasChildNodes())?n:i)(a)}window.tutor_popup=function(u,o,a){var s,r=this;return this.popup_wrapper=function(t){var e=""===o?"":'<img class="tutor-pop-icon" src="'+window._tutorobject.tutor_url+"assets/images/"+o+'.svg"/>';return"<"+t+' class="tutor-component-popup-container">            <div class="tutor-component-popup-'+a+'">                <div class="tutor-component-content-container">'+e+'</div>                <div class="tutor-component-button-container"></div>            </div>        </'+t+">"},this.popup=function(o){var t=o.title?"<h3>"+o.title+"</h3>":"",e=o.description?"<p>"+o.description+"</p>":"",a=Object.keys(o.buttons||{}).map(function(t){var e=o.buttons[t],t=e.id?"tutor-popup-"+e.id:"";return u('<button id="'+t+'" class="tutor-button tutor-button-'+e.class+'">'+e.title+"</button>").click(e.callback)}),n=(s=u(r.popup_wrapper(o.wrapper_tag||"div"))).find(".tutor-component-content-container");n.append(t),o.after_title&&n.append(o.after_title),n.append(e),o.after_description&&n.append(o.after_description),s.click(function(){u(this).remove()}).children().click(function(t){t.stopPropagation()});for(var i=0;i<a.length;i++)s.find(".tutor-component-button-container").append(a[i]);return u("body").append(s),s},{popup:this.popup}},window.tutorDotLoader=t=>`    
    <div class="tutor-dot-loader ${t||""}">
        <span class="dot dot-1"></span>
        <span class="dot dot-2"></span>
        <span class="dot dot-3"></span>
        <span class="dot dot-4"></span>
    </div>`,window.tutor_date_picker=()=>{var t;jQuery.datepicker&&(t=_tutorobject.wp_date_format||"yy-mm-dd",$(".tutor_date_picker").datepicker({dateFormat:t}))},jQuery(document).ready(function(d){"use strict";const n=wp.i18n["__"];function o(){var t;jQuery.datepicker&&(t=_tutorobject.wp_date_format||"yy-mm-dd",d(".tutor_date_picker").datepicker({dateFormat:t}))}function s(){d(".tutor-field-slider").each(function(){var t=d(this),o=t.closest(".tutor-field-type-slider").find('input[type="hidden"]'),a=t.closest(".tutor-field-type-slider").find(".tutor-field-type-slider-value"),e=parseFloat(t.closest(".tutor-field-type-slider").attr("data-min")),n=parseFloat(t.closest(".tutor-field-type-slider").attr("data-max"));t.slider({range:"max",min:e,max:n,value:o.val(),slide:function(t,e){a.text(e.value),o.val(e.value)}})})}function t(t){var e=t.element;return d('<span><i class="tutor-icon-'+d(e).data("icon")+'"></i> '+t.text+"</span>")}function i(){jQuery().sortable&&(d(".course-contents").sortable({handle:".course-move-handle",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){a()}}),d(".tutor-lessons:not(.drop-lessons)").sortable({connectWith:".tutor-lessons",items:"div.course-content-item",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){a()}}))}function a(){var i={};d(".tutor-topics-wrap").each(function(t,e){var o=d(this),a=parseInt(o.attr("id").match(/\d+/)[0],10),n={};o.find(".course-content-item").each(function(t,e){var o=d(this),o=parseInt(o.attr("id").match(/\d+/)[0],10);n[t]=o}),i[t]={topic_id:a,lesson_ids:n}}),d("#tutor_topics_lessons_sorting").val(JSON.stringify(i))}function u(){return{init:function(){d(document).on("click",".tutor-select .tutor-select-option",function(t){t.preventDefault();var e=d(this);"true"!==e.attr("data-is-pro")?(t=e.html().trim(),e.closest(".tutor-select").find(".select-header .lead-option").html(t),e.closest(".tutor-select").find(".select-header input.tutor_select_value_holder").val(e.attr("data-value")).trigger("change"),e.closest(".tutor-select-options").hide(),z()):alert("Tutor Pro version required")}),d(document).on("click",".tutor-select .select-header",function(t){t.preventDefault(),d(this).closest(".tutor-select").find(".tutor-select-options").slideToggle()}),this.setValue(),this.hideOnOutSideClick()},setValue:function(){d(".tutor-select").each(function(){var t=d(this).find(".tutor-select-option");t.length&&t.each(function(){var t,e=d(this);"selected"===e.attr("data-selected")&&(t=e.html().trim(),e.closest(".tutor-select").find(".select-header .lead-option").html(t),e.closest(".tutor-select").find(".select-header input.tutor_select_value_holder").val(e.attr("data-value")))})})},hideOnOutSideClick:function(){d(document).mouseup(function(t){var e=d(".tutor-select-options");d(t.target).closest(".select-header").length||e.is(t.target)||0!==e.has(t.target).length||e.hide()})},reInit:function(){this.setValue()}}}o(),s(),jQuery().select2&&d(".videosource_select2").select2({width:"100%",templateSelection:t,templateResult:t,allowHtml:!0}),d(document).on("change",".tutor_lesson_video_source",function(t){var e=d(this),o=d(this).val();o?d(".video-metabox-source-input-wrap").show():d(".video-metabox-source-input-wrap").hide(),e.closest(".tutor-option-field").find(".video-metabox-source-item").hide(),e.closest(".tutor-option-field").find(".video_source_wrap_"+o).show()}),d(document).on("click",".tutor-course-thumbnail-upload-btn",function(t){t.preventDefault();var e,o=d(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();o.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("src",t.url),o.closest(".tutor-thumbnail-wrap").find("input").val(t.id),d(".tutor-course-thumbnail-delete-btn").show()}),e.open()}),d(document).on("click",".tutor-course-thumbnail-delete-btn",function(t){t.preventDefault();var e=d(this),t=e.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("data-placeholder-src");e.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("src",t),e.closest(".tutor-thumbnail-wrap").find("input").val(""),d(".tutor-course-thumbnail-delete-btn").hide()}),d(document).on("click",".create_new_topic_btn",function(t){t.preventDefault(),d(".tutor-metabox-add-topics").slideToggle()}),d(document).on("click","#tutor-add-topic-btn",function(t){t.preventDefault();var e=d(this),t=e.closest(".tutor-metabox-add-topics").find("input, textarea").serializeObject();t.action="tutor_add_course_topic",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(d("#tutor-course-content-wrap").html(t.data.course_contents),e.closest(".tutor-metabox-add-topics").find('input[type!="hidden"], textarea').each(function(){d(this).val("")}),e.closest(".tutor-metabox-add-topics").slideUp(),i())},complete:function(){e.removeClass("tutor-updating-message")}})}),d(".tutor-zoom-meeting-modal-wrap").on("submit",".tutor-meeting-modal-form",function(t){t.preventDefault();var e=d(this),o=e.serializeObject(),t=Intl.DateTimeFormat().resolvedOptions().timeZone;o.timezone=t;var a=e.find('button[type="submit"]');d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:o,beforeSend:function(){a.addClass("tutor-updating-message")},success:function(t){t.success?q(n("Success","tutor"),a.data("toast_success_message"),"success"):q(n("Update Error","tutor"),n("Meeting Update Failed","tutor"),"error"),t.course_contents?(d(t.selector).html(t.course_contents),"#tutor-course-content-wrap"==t.selector&&i(),d(".tutor-zoom-meeting-modal-wrap").removeClass("show")):location.reload()},complete:function(){a.removeClass("tutor-updating-message")}})}),d(document).on("change keyup",".course-edit-topic-title-input",function(t){t.preventDefault(),d(this).closest(".tutor-topics-top").find(".topic-inner-title").html(d(this).val())}),d(document).on("click",".topic-edit-icon",function(t){t.preventDefault(),d(this).closest(".tutor-topics-top").find(".tutor-topics-edit-form").slideToggle()}),d(document).on("click",".tutor-topics-edit-button",function(t){t.preventDefault();var e=d(this),o=e.closest(".tutor-topics-wrap"),t=parseInt(o.attr("id").match(/\d+/)[0],10),a=e.closest(".tutor-topics-wrap").find('[name="topic_title"]').val(),o=e.closest(".tutor-topics-wrap").find('[name="topic_summery"]').val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{topic_title:a,topic_summery:o,topic_id:t,action:"tutor_update_topic"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(e.closest(".tutor-topics-wrap").find("span.topic-inner-title").text(a),e.closest(".tutor-topics-wrap").find(".tutor-topics-edit-form").slideUp())},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".open-tutor-lesson-modal",function(t){t.preventDefault();var e=d(this),o=e.attr("data-lesson-id"),a=e.attr("data-topic-id"),n=d("#post_ID").val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{lesson_id:o,topic_id:a,course_id:n,action:"tutor_load_edit_lesson_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d(".tutor-lesson-modal-wrap .modal-container").html(t.data.output),d(".tutor-lesson-modal-wrap").attr({"data-lesson-id":o,"data-topic-id":a}).addClass("show");t=(t=tinyMCEPreInit.mceInit.tutor_editor_config)||tinyMCEPreInit.mceInit.course_description;tinymce.init(t),tinymce.execCommand("mceRemoveEditor",!1,"tutor_lesson_modal_editor"),tinyMCE.execCommand("mceAddEditor",!1,"tutor_lesson_modal_editor"),d(document).trigger("lesson_modal_loaded",{lesson_id:o,topic_id:a,course_id:n})},complete:function(){quicktags({id:"tutor_lesson_modal_editor"}),e.removeClass("tutor-updating-message")}})}),d(document).on("click",".lesson_thumbnail_upload_btn",function(t){t.preventDefault();var e,o=d(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();o.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").html('<img src="'+t.url+'" alt="" /><a href="javascript:;" class="tutor-lesson-thumbnail-delete-btn"><i class="tutor-icon-line-cross"></i></a>'),o.closest(".tutor-thumbnail-wrap").find("input").val(t.id),d(".tutor-lesson-thumbnail-delete-btn").show()}),e.open()}),d(document).on("click",".tutor-lesson-thumbnail-delete-btn",function(t){t.preventDefault();t=d(this);t.closest(".tutor-thumbnail-wrap").find("._lesson_thumbnail_id").val(""),t.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").html(""),t.hide()}),d(document).on("click",".tutor-delete-lesson-btn",function(t){var e;t.preventDefault(),confirm(n("Are you sure?","tutor"))&&(t=(e=d(this)).attr("data-lesson-id"),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{lesson_id:t,action:"tutor_delete_lesson_by_id"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&e.closest(".course-content-item").remove()},complete:function(){e.removeClass("tutor-updating-message")}}))}),d(document).on("click",".topic-delete-btn a",function(t){d(this).attr("data-topic-id");confirm(n("Are you sure to delete?","tutor"))||t.preventDefault()}),d(document).on("click",".tutor-expand-all-topic",function(t){t.preventDefault(),d(".tutor-topics-body").slideDown(),d(".expand-collapse-wrap i").removeClass("tutor-icon-light-down").addClass("tutor-icon-light-up")}),d(document).on("click",".tutor-collapse-all-topic",function(t){t.preventDefault(),d(".tutor-topics-body").slideUp(),d(".expand-collapse-wrap i").removeClass("tutor-icon-light-up").addClass("tutor-icon-light-down")}),d(document).on("click",".topic-inner-title, .expand-collapse-wrap",function(t){t.preventDefault();t=d(this);t.closest(".tutor-topics-wrap").find(".tutor-topics-body").slideToggle(),t.closest(".tutor-topics-wrap").find(".expand-collapse-wrap i").toggleClass("tutor-icon-light-down tutor-icon-light-up")}),d(document).on("click",".quiz-modal-btn-first-step",function(t){t.preventDefault();var e,o,a,n=d(this),i=d('[name="quiz_title"]'),u=i.val(),t=d('[name="quiz_description"]').val();u?(i.closest(".tutor-quiz-builder-group").find(".quiz_form_msg").html(""),e=d("#post_ID").val(),o=n.closest(".tutor-modal-wrap").attr("quiz-for-post-id"),d("#tutor_quiz_builder_quiz_id").length?(a=d("#tutor_quiz_builder_quiz_id").val(),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_title:u,quiz_description:t,quiz_id:a,topic_id:o,action:"tutor_quiz_builder_quiz_update"},beforeSend:function(){n.addClass("tutor-updating-message")},success:function(t){d("#tutor-quiz-"+a).html(t.data.output_quiz_row),d('#tutor-quiz-modal-tab-items-wrap a[href="#quiz-builder-tab-questions"]').trigger("click"),s()},complete:function(){n.removeClass("tutor-updating-message")}})):d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_title:u,quiz_description:t,course_id:e,topic_id:o,action:"tutor_create_quiz_and_load_modal"},beforeSend:function(){n.addClass("tutor-updating-message")},success:function(t){d(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),d("#tutor-topics-"+o+" .tutor-lessons").append(t.data.output_quiz_row),d('#tutor-quiz-modal-tab-items-wrap a[href="#quiz-builder-tab-questions"]').trigger("click"),s(),d(document).trigger("quiz_modal_loaded",{topic_id:o,course_id:e})},complete:function(){n.removeClass("tutor-updating-message")}})):i.closest(".tutor-quiz-builder-group").find(".quiz_form_msg").html("Please enter quiz title")}),d(document).on("click",".open-tutor-quiz-modal",function(t){t.preventDefault();var e=d(this),o=e.attr("data-quiz-id"),a=e.attr("data-topic-id");null==a&&(a=e.closest(".tutor-modal-wrap").attr("quiz-for-post-id"));var n=d("#post_ID").val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_id:o,topic_id:a,course_id:n,action:"tutor_load_edit_quiz_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),d(".tutor-quiz-builder-modal-wrap").attr("data-quiz-id",o).attr("quiz-for-post-id",a).addClass("show"),e.attr("data-back-to-tab")&&(t=e.attr("data-back-to-tab"),d('#tutor-quiz-modal-tab-items-wrap a[href="'+t+'"]').trigger("click")),d(document).trigger("quiz_modal_loaded",{quiz_id:o,topic_id:a,course_id:n}),s(),jQuery().sortable&&d(".quiz-builder-questions-wrap").sortable({handle:".question-sorting",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){var a;a={},d(".quiz-builder-question-wrap").each(function(t,e){var o=d(this),o=parseInt(o.attr("data-question-id"),10);a[t]=o}),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_question_ids:a,action:"tutor_quiz_question_sorting"}})}})},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".quiz-modal-settings-save-btn",function(t){t.preventDefault();var e=d(this),o=d(".tutor-quiz-builder-modal-wrap").attr("data-quiz-id"),a=d("#current_topic_id_for_quiz").val(),t=d("#quiz-builder-tab-settings :input, #quiz-builder-tab-advanced-options :input").serializeObject();t.topic_id=a,t.quiz_id=o,t.action="tutor_quiz_modal_update_settings",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&d("#tutor-course-content-wrap").html(t.data.course_contents),t.success?q(n("Success","tutor"),e.data("toast_success_message"),"success"):q(n("Update Error","tutor"),n("Quiz Update Failed","tutor"),"error")},complete:function(){e.removeClass("tutor-updating-message"),"modal_close"===e.attr("data-action")&&d(".tutor-modal-wrap").removeClass("show")}})}),d(document).on("click",".quiz-modal-question-save-btn",function(t){t.preventDefault();var e=d(this),o=d(".quiz_question_form :input").serializeObject();o.action="tutor_quiz_modal_update_question";t=e.closest(".tutor-modal-wrap").attr("quiz-for-post-id");o.topic_id=t,d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:o,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success?e.closest(".tutor-quiz-builder-modal-contents").find(".open-tutor-quiz-modal").trigger("click"):void 0!==t.data&&d("#quiz_validation_msg_wrap").html(t.data.validation_msg)},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".modal-close-btn",function(t){t.preventDefault(),d(".tutor-modal-wrap").removeClass("show")}),d(document).on("keyup",function(t){27===t.keyCode&&d(".tutor-modal-wrap").removeClass("show")}),d(document).on("click",".tutor-add-quiz-btn",function(t){t.preventDefault();var e=d(this),o=d(this).closest(".tutor_add_quiz_wrap").attr("data-add-quiz-under"),t=d(this).data("topic-id");d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_for_post_id:o,current_topic_id:t,action:"tutor_load_quiz_builder_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),d(".tutor-quiz-builder-modal-wrap").attr("quiz-for-post-id",o).addClass("show")},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".tutor-quiz-modal-tab-item",function(t){t.preventDefault();var e=d(this),o=d('[name="quiz_title"]');o.val()?(o.closest(".tutor-quiz-builder-form-row").find(".quiz_form_msg").html(""),t=e.attr("href"),d(".quiz-builder-tab-container").hide(),d(t).show(),d("a.tutor-quiz-modal-tab-item").removeClass("active"),e.addClass("active")):o.closest(".tutor-quiz-builder-form-row").find(".quiz_form_msg").html('<p class="quiz-form-warning">Please save the quiz first</p>')}),d(document).on("click",".quiz-modal-btn-next, .quiz-modal-btn-back",function(t){t.preventDefault();t=d(this).attr("href");d('#tutor-quiz-modal-tab-items-wrap a[href="'+t+'"]').trigger("click")}),d(document).on("click",".quiz-modal-tab-navigation-btn.quiz-modal-btn-cancel",function(t){t.preventDefault(),d(".tutor-modal-wrap").removeClass("show")}),d(document).on("click",".tutor-quiz-open-question-form",function(t){t.preventDefault();var e=d(this),o=d("#tutor_quiz_builder_quiz_id").val(),a=d("#post_ID").val(),t=e.attr("data-question-id"),a={quiz_id:o,course_id:a,action:"tutor_quiz_builder_get_question_form"};t&&(a.question_id=t),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:a,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d(".tutor-quiz-builder-modal-contents").html(t.data.output),u().reInit(),jQuery().sortable&&d("#tutor_quiz_question_answers").sortable({handle:".tutor-quiz-answer-sort-icon",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){var a;a={},d(".tutor-quiz-answer-wrap").each(function(t,e){var o=d(this),o=parseInt(o.attr("data-answer-id"),10);a[t]=o}),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_answer_ids:a,action:"tutor_quiz_answer_sorting"}})}}),z()},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".tutor-quiz-question-trash",function(t){t.preventDefault();var e=d(this),t=e.attr("data-question-id");d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:t,action:"tutor_quiz_builder_question_delete"},beforeSend:function(){e.closest(".quiz-builder-question-wrap").remove()}})}),d(document).on("click",".add_question_answers_option:not(.disabled)",function(t){t.preventDefault();var e=d(this),o=e.attr("data-question-id"),t=d(".quiz_question_form :input").serializeObject();t.question_id=o,t.action="tutor_quiz_add_question_answers",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d("#tutor_quiz_question_answer_form").html(t.data.output),z()},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".tutor-quiz-answer-edit a",function(t){t.preventDefault();var e=d(this),t=e.closest(".tutor-quiz-answer-wrap").attr("data-answer-id");d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:t,action:"tutor_quiz_edit_question_answer"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d("#tutor_quiz_question_answer_form").html(t.data.output)},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click","#quiz-answer-save-btn",function(t){t.preventDefault();var e=d(this),t=d(".quiz_question_form :input").serializeObject();t.action="tutor_save_quiz_answer_options",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){d("#quiz_validation_msg_wrap").html(""),e.addClass("tutor-updating-message")},success:function(t){d("#tutor_quiz_question_answers").trigger("refresh")},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click","#quiz-answer-edit-btn",function(t){t.preventDefault();var e=d(this),t=d(".quiz_question_form :input").serializeObject();t.action="tutor_update_quiz_answer_options",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){d("#tutor_quiz_question_answers").trigger("refresh")},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("change",".tutor-quiz-answers-mark-correct-wrap input",function(t){t.preventDefault();var e=d(this),o=e.val(),t=1;e.prop("checked")||(t=0),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:o,inputValue:t,action:"tutor_mark_answer_as_correct"}})}),d(document).on("refresh","#tutor_quiz_question_answers",function(t){t.preventDefault();var e=d(this),o=e.attr("data-question-id"),t=d(".tutor_select_value_holder").val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:o,question_type:t,action:"tutor_quiz_builder_get_answers_by_question"},beforeSend:function(){e.addClass("tutor-updating-message"),d("#tutor_quiz_question_answer_form").html("")},success:function(t){t.success&&e.html(t.data.output)},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".tutor-quiz-answer-trash-wrap a.answer-trash-btn",function(t){t.preventDefault();var e=d(this),t=e.attr("data-answer-id");d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:t,action:"tutor_quiz_builder_delete_answer"},beforeSend:function(){e.closest(".tutor-quiz-answer-wrap").remove()}})}),d(document).on("click",".tutor-delete-quiz-btn",function(t){var e;t.preventDefault(),confirm(n("Are you sure?","tutor"))&&(t=(e=d(this)).attr("data-quiz-id"),d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_id:t,action:"tutor_delete_quiz_by_id"},beforeSend:function(){e.closest(".course-content-item").remove()}}))}),u().init(),d(document).on("change","input.tutor_select_value_holder",function(t){d(this);d(".add_question_answers_option").trigger("click"),d("#tutor_quiz_question_answers").trigger("refresh")}),d(document).on("click",".tutor-media-upload-btn",function(t){t.preventDefault();var e,o=d(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();o.html('<img src="'+t.url+'" alt="" />'),o.closest(".tutor-media-upload-wrap").find("input").val(t.id)}),e.open()}),d(document).on("click",".tutor-media-upload-trash",function(t){t.preventDefault();t=d(this);t.closest(".tutor-media-upload-wrap").find(".tutor-media-upload-btn").html('<i class="tutor-icon-image1"></i>'),t.closest(".tutor-media-upload-wrap").find("input").val("")});var r,e=(r=0,function(t,e){clearTimeout(r),r=setTimeout(t,e)});d(document).on("click",".tutor-add-instructor-btn",function(t){t.preventDefault();var e=d(this),t=d("#post_ID").val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:t,action:"tutor_load_instructors_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(d(".tutor-instructors-modal-wrap .modal-container").html(t.data.output),d(".tutor-instructors-modal-wrap").addClass("show"))},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("change keyup",".tutor-instructors-modal-wrap .tutor-modal-search-input",function(t){t.preventDefault();var o=d(this),a=d(".tutor-modal-wrap");e(function(){var t=o.val(),e=d("#post_ID").val();d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:e,search_terms:t,action:"tutor_load_instructors_modal"},beforeSend:function(){a.addClass("loading")},success:function(t){t.success&&(d(".tutor-instructors-modal-wrap .modal-container").html(t.data.output),d(".tutor-instructors-modal-wrap").addClass("show"))},complete:function(){a.removeClass("loading")}})},1e3)}),d(document).on("click",".add_instructor_to_course_btn",function(t){t.preventDefault();var e=d(this),o=d(".tutor-modal-wrap"),t=d("#post_ID").val(),o=o.find("input").serializeObject();o.course_id=t,o.action="tutor_add_instructors_to_course",d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:o,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(d(".tutor-course-available-instructors").html(t.data.output),d(".tutor-modal-wrap").removeClass("show"))},complete:function(){e.removeClass("tutor-updating-message")}})}),d(document).on("click",".tutor-instructor-delete-btn",function(t){t.preventDefault();var e=d(this),o=d("#post_ID").val(),t=e.closest(".added-instructor-item").attr("data-instructor-id");d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:o,instructor_id:t,action:"detach_instructor_from_course"},success:function(t){t.success&&e.closest(".added-instructor-item").remove()}})}),d(document).on("click",".settings-tabs-navs li",function(t){t.preventDefault();var e=d(this),o=e.find("a").attr("data-target"),t=e.find("a").attr("href");e.addClass("active").siblings("li.active").removeClass("active"),d(".settings-tab-wrap").removeClass("active").hide(),d(o).addClass("active").show(),window.history.pushState({},"",t)}),d(document).on("lesson_modal_loaded quiz_modal_loaded assignment_modal_loaded",function(t,e){jQuery().select2&&d(".select2_multiselect").select2({dropdownCssClass:"increasezindex"}),o()}),d(document).on("lesson_modal_loaded",function(t,e){d(".tutor-lesson-modal-wrap .modal-title h1").html(n("Lesson","tutor"))}),d(document).on("assignment_modal_loaded",function(t,e){d(".tutor-lesson-modal-wrap .modal-title h1").html(n("Assignment","tutor"))}),d(document).on("keyup change",".tutor-number-validation",function(t){var e=d(this),o=parseInt(e.val()),a=parseInt(e.attr("data-min")),n=parseInt(e.attr("data-max"));o<a?e.val(a):n<o&&e.val(n)}),d(document).on("click",".tutor-instructor-feedback",function(t){t.preventDefault();var e=d(this);d.ajax({url:window.ajaxurl||_tutorobject.ajaxurl,type:"POST",data:{attempts_id:e.data("attemptid"),feedback:d(".tutor-instructor-feedback-content").val(),action:"tutor_instructor_feedback"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(e.closest(".course-content-item").remove(),q(n("Success","tutor"),e.data("toast_success_message"),"success"))},complete:function(){e.removeClass("tutor-updating-message")}})});var c=d(".tutor-announcement-add-new"),l=d(".tutor-announcement-edit"),p=d(".tutor-announcement-delete"),m=d(".tutor-announcement-details"),_=d(".tutor-announcement-close-btn"),f=d(".tutor-accouncement-create-modal"),h=d(".tutor-accouncement-update-modal"),v=d(".tutor-accouncement-details-modal");function w(t,e){var o=new URL(window.location.href),a=o.searchParams;return a.set(t,e),o.search=a.toString(),a.set("paged",1),o.search=a.toString(),o.toString()}d(c).click(function(){f.addClass("show"),d("#tutor-annoucement-backend-create-modal").addClass("show")}),d(m).click(function(){var t=d(this).attr("announcement-date"),e=d(this).attr("announcement-id"),o=d(this).attr("course-id"),a=d(this).attr("course-name"),n=d(this).attr("announcement-title"),i=d(this).attr("announcement-summary");d(".tutor-announcement-detail-content").html(`<h3>${n}</h3><p>${i}</p>`),d(".tutor-announcement-detail-course-info p").html(`${a}`),d(".tutor-announcement-detail-date-info p").html(`${t}`),d("#tutor-announcement-edit-from-detail").attr("announcement-id",e),d("#tutor-announcement-edit-from-detail").attr("course-id",o),d("#tutor-announcement-edit-from-detail").attr("announcement-title",n),d("#tutor-announcement-edit-from-detail").attr("announcement-summary",i),d("#tutor-announcement-delete-from-detail").attr("announcement-id",e),v.addClass("show")}),d(l).click(function(){v&&v.removeClass("show");var t=d(this).attr("announcement-id"),e=d(this).attr("course-id"),o=d(this).attr("announcement-title"),a=d(this).attr("announcement-summary");d("#tutor-announcement-course-id").val(e),d("#announcement_id").val(t),d("#tutor-announcement-title").val(o),d("#tutor-announcement-summary").val(a),h.addClass("show")}),d(_).click(function(){f.removeClass("show"),h.removeClass("show"),v.removeClass("show"),d("#tutor-annoucement-backend-create-modal").removeClass("show")}),d(".tutor-announcements-form").on("submit",function(t){t.preventDefault();var e=d(this).find('button[type="submit"]'),t=d(".tutor-announcements-form").serialize()+"&action=tutor_announcement_create&action_type=create";d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){if(d(".tutor-alert").remove(),"success"==t.status&&location.reload(),"validation_error"==t.status){d(".tutor-announcements-create-alert").append('<div class="tutor-alert alert-warning"></div>');for(var[e,o]of Object.entries(t.message))d(".tutor-announcements-create-alert .tutor-alert").append(`<li>${o}</li>`)}"fail"==t.status&&d(".tutor-announcements-create-alert").html(`<li>${t.message}</li>`)},error:function(t){console.log(t)}})}),d(".tutor-announcements-update-form").on("submit",function(t){t.preventDefault();var e=d(this).find('button[type="submit"]'),t=d(".tutor-announcements-update-form").serialize()+"&action=tutor_announcement_create&action_type=update";d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){if(d(".tutor-alert").remove(),"success"==t.status&&location.reload(),"validation_error"==t.status){d(".tutor-announcements-update-alert").append('<div class="tutor-alert alert-warning"></div>');for(var[e,o]of Object.entries(t.message))d(".tutor-announcements-update-alert > .tutor-alert").append(`<li>${o}</li>`)}"fail"==t.status&&d(".tutor-announcements-create-alert").html(`<li>${t.message}</li>`)},error:function(){}})}),d(p).click(function(){var t=d(this).attr("announcement-id"),e=d("#tutor-announcement-tr-"+t);confirm("Do you want to delete?")&&d.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{action:"tutor_announcement_delete",announcement_id:t},beforeSend:function(){},success:function(t){e.remove(),v.length&&v.removeClass("show"),"fail"==t.status&&console.log(t.message)},error:function(){}})}),d(".tutor-announcement-course-sorting").on("change",function(t){window.location=w("course-id",d(this).val())}),d(".tutor-announcement-order-sorting").on("change",function(t){window.location=w("order",d(this).val())}),d(".tutor-announcement-date-sorting").on("change",function(t){window.location=w("date",d(this).val())}),d(".tutor-announcement-search-sorting").on("click",function(t){window.location=w("search",d(".tutor-announcement-search-field").val())}),d(document).click(function(){d(".tutor-dropdown").removeClass("show")}),d(".tutor-dropdown").click(function(t){t.stopPropagation(),d(".tutor-dropdown").hasClass("show")&&d(".tutor-dropdown").removeClass("show"),d(this).addClass("show")});var b,g,_=".video_source_wrap_external_url input, .video_source_wrap_vimeo input, .video_source_wrap_youtube input, .video_source_wrap_html5, .video_source_upload_wrap_html5";d("body").on("paste",_,function(t){t.stopImmediatePropagation();var u=d(this).closest(".lesson-modal-form-wrap").find(".tutor-option-field-video-duration"),e=u.find("label"),o=d(this).hasClass("video_source_wrap_html5")||d(this).hasClass("video_source_upload_wrap_html5"),a=d(this).data("autofill_url");d(this).data("autofill_url",null);function n(t){t?0==e.find("img").length&&e.append(' <img src="'+window._tutorobject.loading_icon_url+'" style="display:inline-block"/>'):e.find("img").remove()}function i(t){for(var e=Math.floor(t/3600),o=Math.floor((t-3600*e)/60),t=Math.round(t-3600*e-60*o),a=[e=e<10?"0"+e:e,o=o<10?"0"+o:o,t=t<10?"0"+t:t],n=u.find("input"),i=0;i<3;i++)n.eq(i).val(a[i])}var s,r,c,t=o?d(this).find("span").data("video_url"):a||t.originalEvent.clipboardData.getData("text");o||d(this).parent().hasClass("video_source_wrap_external_url")?((s=document.createElement("video")).addEventListener("loadedmetadata",function(){i(s.duration),n(!1)}),n(!0),s.src=t):d(this).parent().hasClass("video_source_wrap_vimeo")?(r=(c=t.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/))?c[5]:null)&&(n(!0),d.getJSON("http://vimeo.com/api/v2/video/"+r+"/json",function(t){Array.isArray(t)&&t[0]&&void 0!==t[0].duration&&i(t[0].duration),n(!1)})):d(this).parent().hasClass("video_source_wrap_youtube")&&(r=!(!(c=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/))||11!=c[7].length)&&c[7],c=d(this).data("youtube_api_key"),r&&c&&(c="https://www.googleapis.com/youtube/v3/videos?id="+r+"&key="+c+"&part=contentDetails",n(!0),d.getJSON(c,function(t){"object"==typeof t&&t.items&&t.items[0]&&t.items[0].contentDetails&&t.items[0].contentDetails.duration&&i(function(t){t=(t=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/)).slice(1).map(function(t){if(null!=t)return t.replace(/\D/,"")});return 3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}(t.items[0].contentDetails.duration)),n(!1)})))}).on("input",_,function(){b&&clearTimeout(b);var e=d(this);b=setTimeout(function(){var t=(t=e.val())?t.trim():"";console.log("Trigger",t),t&&e.data("autofill_url",t).trigger("paste")},700)}),d(".tutor-form-submit-through-ajax").submit(function(t){t.preventDefault();var e=d(this),o=d(this).attr("action")||window.location.href,a=d(this).attr("method")||"GET",t=d(this).serializeObject();e.find("button").addClass("tutor-updating-message"),d.ajax({url:o,type:a,data:t,success:function(){q(n("Success","tutor"),e.data("toast_success_message"),"success")},complete:function(){e.find("button").removeClass("tutor-updating-message")}})}),d.ajaxSetup({data:(_=(p=window._tutorobject||{}).nonce_key||"",p=p[_]||"",g?{key:_,value:p}:{[_]:p})})}),jQuery.fn.serializeObject=function(){var t={},e=this.serializeArray();return jQuery.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}})();